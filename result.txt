TOKEN_TYPE                    CONTENT                       

Delimiter                     #                             
Identifier                    include                       
Operator                      <                             
Identifier                    stdio                         
Delimiter                     .                             
Identifier                    h                             
Operator                      >                             
Delimiter                     #                             
Identifier                    include                       
Operator                      <                             
Identifier                    string                        
Delimiter                     .                             
Identifier                    h                             
Operator                      >                             
Delimiter                     #                             
Identifier                    include                       
String                        protocol.h                    
Delimiter                     #                             
Identifier                    include                       
String                        datalink.h                    
Delimiter                     #                             
Identifier                    define                        
Identifier                    DATA_TIMER                    
Number                        2000                          
Keyword                       struct                        
Identifier                    FRAME                         
Delimiter                     {                             
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    kind                          
Delimiter                     ;                             
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    ack                           
Delimiter                     ;                             
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    seq                           
Delimiter                     ;                             
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    data                          
Delimiter                     [                             
Identifier                    PKT_LEN                       
Delimiter                     ]                             
Delimiter                     ;                             
Keyword                       unsigned                      
Keyword                       int                           
Identifier                    padding                       
Delimiter                     ;                             
Delimiter                     }                             
Delimiter                     ;                             
Keyword                       static                        
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    frame_nr                      
Operator                      =                             
Number                        0                             
Delimiter                     ,                             
Identifier                    buffer                        
Delimiter                     [                             
Identifier                    PKT_LEN                       
Delimiter                     ]                             
Delimiter                     ,                             
Identifier                    nbuffered                     
Delimiter                     ;                             
Keyword                       static                        
Keyword                       unsigned                      
Keyword                       char                          
Identifier                    frame_expected                
Operator                      =                             
Number                        0                             
Delimiter                     ;                             
Keyword                       static                        
Keyword                       int                           
Identifier                    phl_ready                     
Operator                      =                             
Number                        0                             
Delimiter                     ;                             
Keyword                       static                        
Keyword                       void                          
Identifier                    put_frame                     
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       char                          
Operator                      *                             
Identifier                    frame                         
Delimiter                     ,                             
Keyword                       int                           
Identifier                    len                           
Delimiter                     )                             
Delimiter                     {                             
Operator                      *                             
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       int                           
Operator                      *                             
Delimiter                     )                             
Delimiter                     (                             
Identifier                    frame                         
Operator                      +                             
Identifier                    len                           
Delimiter                     )                             
Operator                      =                             
Identifier                    crc32                         
Delimiter                     (                             
Identifier                    frame                         
Delimiter                     ,                             
Identifier                    len                           
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    send_frame                    
Delimiter                     (                             
Identifier                    frame                         
Delimiter                     ,                             
Identifier                    len                           
Operator                      +                             
Number                        4                             
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    phl_ready                     
Operator                      =                             
Number                        0                             
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       static                        
Keyword                       void                          
Identifier                    send_data_frame               
Delimiter                     (                             
Keyword                       void                          
Delimiter                     )                             
Delimiter                     {                             
Keyword                       struct                        
Identifier                    FRAME                         
Identifier                    s                             
Delimiter                     ;                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    kind                          
Operator                      =                             
Identifier                    FRAME_DATA                    
Delimiter                     ;                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    seq                           
Operator                      =                             
Identifier                    frame_nr                      
Delimiter                     ;                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    ack                           
Operator                      =                             
Number                        1                             
Operator                      -                             
Identifier                    frame_expected                
Delimiter                     ;                             
Identifier                    memcpy                        
Delimiter                     (                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    data                          
Delimiter                     ,                             
Identifier                    buffer                        
Delimiter                     ,                             
Identifier                    PKT_LEN                       
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    dbg_frame                     
Delimiter                     (                             
String                        Send DATA %d %d, ID %d\n      
Delimiter                     ,                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    seq                           
Delimiter                     ,                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    ack                           
Delimiter                     ,                             
Operator                      *                             
Delimiter                     (                             
Keyword                       short                         
Operator                      *                             
Delimiter                     )                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    data                          
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    put_frame                     
Delimiter                     (                             
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       char                          
Operator                      *                             
Delimiter                     )                             
Operator                      &                             
Identifier                    s                             
Delimiter                     ,                             
Number                        3                             
Operator                      +                             
Identifier                    PKT_LEN                       
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    start_timer                   
Delimiter                     (                             
Identifier                    frame_nr                      
Delimiter                     ,                             
Identifier                    DATA_TIMER                    
Delimiter                     )                             
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       static                        
Keyword                       void                          
Identifier                    send_ack_frame                
Delimiter                     (                             
Keyword                       void                          
Delimiter                     )                             
Delimiter                     {                             
Keyword                       struct                        
Identifier                    FRAME                         
Identifier                    s                             
Delimiter                     ;                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    kind                          
Operator                      =                             
Identifier                    FRAME_ACK                     
Delimiter                     ;                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    ack                           
Operator                      =                             
Number                        1                             
Operator                      -                             
Identifier                    frame_expected                
Delimiter                     ;                             
Identifier                    dbg_frame                     
Delimiter                     (                             
String                        Send ACK  %d\n                
Delimiter                     ,                             
Identifier                    s                             
Delimiter                     .                             
Identifier                    ack                           
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    put_frame                     
Delimiter                     (                             
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       char                          
Operator                      *                             
Delimiter                     )                             
Operator                      &                             
Identifier                    s                             
Delimiter                     ,                             
Number                        2                             
Delimiter                     )                             
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       int                           
Identifier                    main                          
Delimiter                     (                             
Keyword                       int                           
Identifier                    argc                          
Delimiter                     ,                             
Keyword                       char                          
Operator                      *                             
Operator                      *                             
Identifier                    argv                          
Delimiter                     )                             
Delimiter                     {                             
Keyword                       int                           
Identifier                    event                         
Delimiter                     ,                             
Identifier                    arg                           
Delimiter                     ;                             
Keyword                       struct                        
Identifier                    FRAME                         
Identifier                    f                             
Delimiter                     ;                             
Keyword                       int                           
Identifier                    len                           
Operator                      =                             
Number                        0                             
Delimiter                     ;                             
Identifier                    protocol_init                 
Delimiter                     (                             
Identifier                    argc                          
Delimiter                     ,                             
Identifier                    argv                          
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    lprintf                       
Delimiter                     (                             
String                        Designed by Jiang Yanjun, build: " __DATE__"  "__TIME__"\n
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    disable_network_layer         
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       for                           
Delimiter                     (                             
Delimiter                     ;                             
Delimiter                     ;                             
Delimiter                     )                             
Delimiter                     {                             
Identifier                    event                         
Operator                      =                             
Identifier                    wait_for_event                
Delimiter                     (                             
Operator                      &                             
Identifier                    arg                           
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       switch                        
Delimiter                     (                             
Identifier                    event                         
Delimiter                     )                             
Delimiter                     {                             
Keyword                       case                          
Identifier                    NETWORK_LAYER_READY           
Delimiter                     :                             
Identifier                    get_packet                    
Delimiter                     (                             
Identifier                    buffer                        
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    nbuffered                     
Operator                      ++                            
Delimiter                     ;                             
Identifier                    send_data_frame               
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       break                         
Delimiter                     ;                             
Keyword                       case                          
Identifier                    PHYSICAL_LAYER_READY          
Delimiter                     :                             
Identifier                    phl_ready                     
Operator                      =                             
Number                        1                             
Delimiter                     ;                             
Keyword                       break                         
Delimiter                     ;                             
Keyword                       case                          
Identifier                    FRAME_RECEIVED                
Delimiter                     :                             
Identifier                    len                           
Operator                      =                             
Identifier                    recv_frame                    
Delimiter                     (                             
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       char                          
Operator                      *                             
Delimiter                     )                             
Operator                      &                             
Identifier                    f                             
Delimiter                     ,                             
Keyword                       sizeof                        
Identifier                    f                             
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    len                           
Operator                      <                             
Number                        5                             
Operator                      ||                            
Identifier                    crc32                         
Delimiter                     (                             
Delimiter                     (                             
Keyword                       unsigned                      
Keyword                       char                          
Operator                      *                             
Delimiter                     )                             
Operator                      &                             
Identifier                    f                             
Delimiter                     ,                             
Identifier                    len                           
Delimiter                     )                             
Operator                      !=                            
Number                        0                             
Delimiter                     )                             
Delimiter                     {                             
Identifier                    dbg_event                     
Delimiter                     (                             
String                        **** Receiver Error, Bad CRC Checksum\n
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       break                         
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    kind                          
Operator                      ==                            
Identifier                    FRAME_ACK                     
Delimiter                     )                             
Identifier                    dbg_frame                     
Delimiter                     (                             
String                        Recv ACK  %d\n                
Delimiter                     ,                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    ack                           
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    kind                          
Operator                      ==                            
Identifier                    FRAME_DATA                    
Delimiter                     )                             
Delimiter                     {                             
Identifier                    dbg_frame                     
Delimiter                     (                             
String                        Recv DATA %d %d, ID %d\n      
Delimiter                     ,                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    seq                           
Delimiter                     ,                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    ack                           
Delimiter                     ,                             
Operator                      *                             
Delimiter                     (                             
Keyword                       short                         
Operator                      *                             
Delimiter                     )                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    data                          
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    seq                           
Operator                      ==                            
Identifier                    frame_expected                
Delimiter                     )                             
Delimiter                     {                             
Identifier                    put_packet                    
Delimiter                     (                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    data                          
Delimiter                     ,                             
Identifier                    len                           
Operator                      -                             
Number                        7                             
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    frame_expected                
Operator                      =                             
Number                        1                             
Operator                      -                             
Identifier                    frame_expected                
Delimiter                     ;                             
Delimiter                     }                             
Identifier                    send_ack_frame                
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    f                             
Delimiter                     .                             
Identifier                    ack                           
Operator                      ==                            
Identifier                    frame_nr                      
Delimiter                     )                             
Delimiter                     {                             
Identifier                    stop_timer                    
Delimiter                     (                             
Identifier                    frame_nr                      
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    nbuffered                     
Operator                      --                            
Delimiter                     ;                             
Identifier                    frame_nr                      
Operator                      =                             
Number                        1                             
Operator                      -                             
Identifier                    frame_nr                      
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       break                         
Delimiter                     ;                             
Keyword                       case                          
Identifier                    DATA_TIMEOUT                  
Delimiter                     :                             
Identifier                    dbg_event                     
Delimiter                     (                             
String                        ---- DATA %d timeout\n        
Delimiter                     ,                             
Identifier                    arg                           
Delimiter                     )                             
Delimiter                     ;                             
Identifier                    send_data_frame               
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       break                         
Delimiter                     ;                             
Delimiter                     }                             
Keyword                       if                            
Delimiter                     (                             
Identifier                    nbuffered                     
Operator                      <                             
Number                        1                             
Operator                      &&                            
Identifier                    phl_ready                     
Delimiter                     )                             
Identifier                    enable_network_layer          
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Keyword                       else                          
Identifier                    disable_network_layer         
Delimiter                     (                             
Delimiter                     )                             
Delimiter                     ;                             
Delimiter                     }                             
Delimiter                     }                             


STATISTICS

ITEM                          COUNT                         
Identifier                    104                           
Number                        18                            
Operator                      57                            
Delimiter                     230                           
Keyword                       69                            
Line                          115                           
Total character number        1867                          


ID_TABLE

249            DATA_TIMEOUT
205            DATA_TIMER
206            FRAME
230            FRAME_ACK
225            FRAME_DATA
244            FRAME_RECEIVED
241            NETWORK_LAYER_READY
243            PHYSICAL_LAYER_READY
211            PKT_LEN
208            ack
235            arg
232            argc
233            argv
214            buffer
221            crc32
210            data
246            dbg_event
227            dbg_frame
204            define
239            disable_network_layer
250            enable_network_layer
234            event
236            f
219            frame
216            frame_expected
213            frame_nr
242            get_packet
202            h
200            include
207            kind
220            len
238            lprintf
231            main
226            memcpy
215            nbuffered
212            padding
217            phl_ready
237            protocol_init
218            put_frame
247            put_packet
245            recv_frame
224            s
229            send_ack_frame
223            send_data_frame
222            send_frame
209            seq
228            start_timer
201            stdio
248            stop_timer
203            string
240            wait_for_event
